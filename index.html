<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gumball's Times Table Challenge</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%2300a8e1'/><circle cx='35' cy='40' r='6' fill='black'/><circle cx='65' cy='40' r='6' fill='black'/><path d='M 40 60 Q 50 70 60 60' stroke='black' stroke-width='3' fill='none'/></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üéÆ Gumball's Times Table Challenge!</h1>
            <p class="subtitle">Help Gumball and Darwin save Elmore Junior High!</p>
        </div>

        <div class="stats-bar">
            <div class="stat-box">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Streak</div>
                <div class="stat-value" id="streak">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Progress</div>
                <div class="stat-value" id="progress">0/0</div>
            </div>
        </div>

        <!-- Name Input Screen -->
        <div id="name-screen" class="screen active start-screen">
            <div class="character-bubble">
                <div class="character-avatar">
                    <img src="assets/gumball.png" alt="Gumball">
                </div>
                <div>
                    <div class="character-name">Gumball</div>
                    <p>Hey there, friend! What's your name? I'm Gumball! üê†</p>
                </div>
            </div>

            <div class="name-input-container">
                <input
                    type="text"
                    id="player-name-input"
                    class="name-input"
                    placeholder="Enter your name (default: Lucas)"
                    maxlength="20"
                    onkeypress="if(event.key === 'Enter') startWithName()">
                <button class="btn btn-primary" onclick="startWithName()">Let's Play! üöÄ</button>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="screen start-screen">
            <div class="character-bubble">
                <div class="character-avatar">
                    <img src="assets/gumball.png" alt="Gumball">
                </div>
                <div>
                    <div class="character-name">Gumball</div>
                    <p id="welcome-message"></p>
                </div>
            </div>

            <div class="mode-buttons">
                <button class="mode-btn practice-btn" onclick="selectMode('practice')">
                    üìö Practice Mode<br><small>10 questions, no timer</small>
                </button>
                <button class="mode-btn race-btn" onclick="selectMode('race')">
                    ‚ö° Speed Race<br><small>15 questions, 10 sec each</small>
                </button>
                <button class="mode-btn boss-btn" onclick="selectMode('boss')">
                    üëæ Boss Battle<br><small>20 questions, 8 sec each</small>
                </button>
                <button class="mode-btn ninja-btn" onclick="selectMode('ninja')">
                    ü•∑ Ninja Mode<br><small>Slice falling characters!</small>
                </button>
            </div>
        </div>

        <!-- Table Selection Screen -->
        <div id="table-select-screen" class="screen">
            <div class="character-bubble">
                <div class="character-avatar">
                    <img src="assets/darwin.png" alt="Darwin">
                </div>
                <div>
                    <div class="character-name">Darwin</div>
                    <p>Hey! It's me, Darwin! Which times tables do you want to practice? You can pick as many as you like!</p>
                </div>
            </div>

            <div class="table-grid" id="table-grid"></div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="startGame()">Start Game! üöÄ</button>
                <button class="btn btn-secondary" onclick="goBackToStart()">Back</button>
            </div>
        </div>

        <!-- Character Selection Screen (Boss Mode only) -->
        <div id="character-select-screen" class="screen">
            <div class="character-bubble">
                <div class="character-avatar">
                    <img src="assets/gumball.png" alt="Gumball">
                </div>
                <div>
                    <div class="character-name">Gumball</div>
                    <p>Choose your character for the Boss Battle! Who will you fight as?</p>
                </div>
            </div>

            <div class="character-grid" id="character-grid"></div>

            <div class="button-group">
                <button class="btn btn-primary" id="start-boss-battle-btn" onclick="startBossBattle()" disabled>Start Battle! ‚öîÔ∏è</button>
                <button class="btn btn-secondary" onclick="goBackToTableSelect()">Back</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div style="text-align: right; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                <button class="btn btn-secondary" id="mute-tts-btn" onclick="toggleMuteTTS()" style="padding: 8px 20px; font-size: 0.9em;">üîä Mute Voice</button>
                <button class="btn btn-secondary" onclick="exitGame()" style="padding: 8px 20px; font-size: 0.9em;">Exit Game ‚úï</button>
            </div>

            <div id="timer-container" class="timer-bar" style="display: none;">
                <div class="timer-fill" id="timer-fill"></div>
                <div class="timer-text" id="timer-text">10</div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <!-- Battle Arena -->
            <div class="battle-arena">
                <div class="battle-stats">
                    <div class="player-stats">
                        <div class="hits-label">Your Hits</div>
                        <div class="hits-counter" id="player-hits">0</div>
                    </div>
                    <div class="opponent-stats">
                        <div class="hits-label">Opponent Hits</div>
                        <div class="hits-counter" id="opponent-hits">0</div>
                    </div>
                </div>

                <div class="battle-field">
                    <div class="player-position">
                        <div class="player-character" id="player-character">
                            <img src="assets/gumball.png" alt="Player">
                        </div>
                    </div>

                    <div class="battle-center">
                        <div class="projectile-container" id="projectile-container"></div>
                    </div>

                    <div class="opponent-position">
                        <div class="opponent-character" id="opponent-character">
                            <img src="assets/gumball.png" alt="Opponent">
                        </div>
                    </div>
                </div>
            </div>

            <div class="character-bubble" id="character-message">
                <div class="character-avatar" id="character-avatar"></div>
                <div>
                    <div class="character-name" id="character-name">Gumball</div>
                    <p id="character-text">You can do this! üí™</p>
                </div>
            </div>

            <div class="question-box">
                <div class="question-text" id="question">5 √ó 7 = ?</div>
            </div>

            <div class="feedback-area" id="feedback-area"></div>

            <div class="answer-grid" id="answer-grid"></div>

            <div class="encouragement" id="encouragement"></div>
        </div>

        <!-- Ninja Mode Game Screen -->
        <div id="ninja-screen" class="screen">
            <div style="text-align: right; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                <div style="font-size: 0.9em; color: var(--color-dark-purple); font-weight: bold;">
                    Use ‚Üê ‚Üí Arrow Keys or Touch to Move!
                </div>
                <button class="btn btn-secondary" onclick="exitGame()" style="padding: 8px 20px; font-size: 0.9em;">Exit Game ‚úï</button>
            </div>

            <div id="ninja-timer-container" class="timer-bar" style="display: block;">
                <div class="timer-fill" id="ninja-timer-fill"></div>
                <div class="timer-text" id="ninja-timer-text">60</div>
            </div>

            <div class="ninja-game-area" id="ninja-game-area">
                <div class="ninja-instructions">
                    <h3>üß∫ Catch the Characters!</h3>
                    <p>Save them from falling! Avoid the bombs! üí£</p>
                </div>
                <div class="falling-characters-container" id="falling-characters-container"></div>
                <div class="basket-container" id="basket-container">
                    <div class="basket" id="basket">üß∫</div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen results-screen">
            <h2 class="result-title" id="result-title">Awesome Work!</h2>

            <div class="stars" id="stars">‚≠ê‚≠ê‚≠ê</div>

            <div class="character-bubble" id="result-message">
                <div class="character-avatar" id="result-avatar"></div>
                <div>
                    <div class="character-name" id="result-character">Gumball</div>
                    <p id="result-text">You did an amazing job! üéâ</p>
                </div>
            </div>

            <div class="stats-table">
                <div class="stat-item">
                    <div class="stat-item-label">Correct</div>
                    <div class="stat-item-value" id="result-correct">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-item-label">Wrong</div>
                    <div class="stat-item-value" id="result-wrong">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-item-label">Accuracy</div>
                    <div class="stat-item-value" id="result-accuracy">0%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-item-label">Final Score</div>
                    <div class="stat-item-value" id="result-score">0</div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="playAgain()">Play Again! üéÆ</button>
                <button class="btn btn-secondary" onclick="changeTables()">Change Tables üéØ</button>
                <button class="btn btn-secondary" onclick="changeMode()">Change Mode üé≤</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
